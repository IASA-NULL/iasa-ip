<!DOCTYPE html>
<html lang="ko">
<head>
    <title>IP 4.2.1</title>
    <link href="css/materialize.min.css" media="screen,projection" rel="stylesheet" type="text/css"/>
    <script>if (typeof module === 'object') {
        window.module = module;
        module = undefined;
    }</script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <link id="theme" rel="stylesheet" type="text/css">
    <script>if (window.module) module = window.module;</script>
    <style>
        @font-face {
            font-family: 'nanum';
            src: url("res/NSR.ttf");
        }

        * {
            font-family: 'nanum';
        }

        html {
            width: 600px;
            height: 200px;
            overflow: hidden;
        }

        #text {
            font-size: 4.4em;
            margin-top: 8%;
            margin-left: 0;
        }
    </style>
</head>

<body style="width:100%;height:100%;border-color:#673ab7;border-style: solid;">

<script>
    const {ipcRenderer} = require('electron');
    const settings = require('electron-settings');

    function getTheme() {
        if (!settings.get('atheme')) {
            if (window.matchMedia('(prefers-color-scheme:dark)').matches) return true;
            else return false;
        } else {
            if (settings.get('dtheme')) return true;
            else return false;
        }
    }

    function loadTheme() {
        if (getTheme()) document.getElementById("theme").href = "./css/alert/dark.css";
        else document.getElementById("theme").href = "./css/alert/light.css";
    }

    ipcRenderer.on('finishChange', () => {
        $('.indeterminate').fadeOut(500);
        $('#text').html('완료!');
        setTimeout(() => {
            $('.determinate').fadeIn(500);
        }, 300);
        setTimeout(() => {
            $('.determinate').css('width', '100%');
        }, 500);
        setTimeout(() => {
            $('html').fadeOut(500)
        }, 1000);
        setTimeout(() => {
            self.opener = self;
            window.close();
        }, 1700);
    });
    $(document).ready(() => {
        $('.determinate').hide();
        loadTheme();
    });
</script>
<div style="float:left;width:30%;">
    <img src="res/house.png" style="margin-left:40px;margin-top:40px;height:120px;">
</div>
<div style="float:left;width:65%;margin-left:5%;">
    <p id="text">IP 변경중...</p>
    <div class="progress deep-purple lighten-4" style="top:-43px;width:90%;">
        <div class="indeterminate deep-purple lighten-1"></div>
        <div class="determinate deep-purple lighten-1" style="width: 0"></div>
    </div>
</div>
</body>

</html>