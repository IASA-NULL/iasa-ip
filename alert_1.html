<!DOCTYPE html>
<html lang="ko">
<head>
    <title>IP 4.2.1</title>
    <link href="css/materialize.min.css" media="screen,projection" rel="stylesheet" type="text/css"/>
    <script>if (typeof module === 'object') {
        window.module = module;
        module = undefined;
    }</script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <link href="css/alert/common.css" rel="stylesheet" type="text/css"/>
    <link id="theme" rel="stylesheet" type="text/css">
    <script>if (window.module) module = window.module;</script>
</head>

<body>
<script>
    const settings = require('electron-settings');

    function getTheme() {
        if (!settings.get('atheme')) {
            if (window.matchMedia('(prefers-color-scheme:dark)').matches) return true;
            else return false;
        } else {
            if (settings.get('dtheme')) return true;
            else return false;
        }
    }

    function loadTheme() {
        if (getTheme()) document.getElementById("theme").href = "./css/alert/dark.css";
        else document.getElementById("theme").href = "./css/alert/light.css";
    }

    setTimeout(() => {
        $('.indeterminate').fadeOut(500);
        $('#text').html('완료!');
        setTimeout(() => {
            $('.determinate').fadeIn(500);
        }, 300);
        setTimeout(() => {
            $('.determinate').css('width', '100%');
        }, 500);
        setTimeout(() => {
            $('html').fadeOut(500)
        }, 1000);
        setTimeout(() => {
            self.opener = self;
            window.close();
        }, 1700);
    }, 800);
    $(document).ready(() => {
        $('.determinate').hide();
        loadTheme();
    });
</script>
<div id="icon">
    <img src="res/house.png">
</div>
<div id="cont">
    <p id="text">IP 변경중...</p>
    <div class="progress deep-purple lighten-4">
        <div class="indeterminate deep-purple lighten-1"></div>
        <div class="determinate deep-purple lighten-1" style="width: 0"></div>
    </div>
</div>
</body>

</html>